<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="nxdlformat.xsl" ?>
<!--
# NeXus - Neutron and X-ray Common Data Format
# 
# Copyright (C) 2008-2022 NeXus International Advisory Committee (NIAC)
# 
# This library is free software; you can redistribute it and/or
# modify it under the terms of the GNU Lesser General Public
# License as published by the Free Software Foundation; either
# version 3 of the License, or (at your option) any later version.
#
# This library is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# Lesser General Public License for more details.
#
# You should have received a copy of the GNU Lesser General Public
# License along with this library; if not, write to the Free Software
# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
#
# For further information, see http://www.nexusformat.org
-->
<definition
    name="NXazint"
    extends="NXobject"
    type="group"
    category="application"
    xmlns="http://definition.nexusformat.org/nxdl/3.1"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://definition.nexusformat.org/nxdl/3.1 ../nxdl.xsd "
    >
    <symbols>
        <doc>
            The symbol(s) listed here will be used below to coordinate datasets with the same shape.
        </doc>
        <symbol name="nImg">
            <doc>Number of intergated images</doc>
        </symbol>
        <symbol name="nRad">
            <doc>Number of radial bins</doc>
        </symbol>
        <symbol name="nRadEdge">
            <doc>Number of radial bins edges (nRad+1)</doc>
        </symbol>
        <symbol name="nAzi">
            <doc>Number of azimuthal bins</doc>
        </symbol>
    </symbols>

    <doc>
        This application definition describes data from two-dimensional area detectors that has been
        integrated azimuthally, with a certain radial binning in units of q or 2theta and an optional
        binning around the azimuthal angle eta.
    </doc>

    <group type="NXentry">
        <field name="definition">
            <doc> Official NeXus NXDL schema to which this file conforms. </doc>
            <enumeration>
                <item value="NXazint"></item>
            </enumeration>
        </field>

        <group name="data1d" type="NXdata">
            <doc> Azimuthally integrated data with radial binning in q or 2theta and without azimuthal binning. </doc>
            <attribute name="axes" type="NX_CHAR">
                <enumeration>
                    <item value="['.', 'x']"></item>
                </enumeration>
                <dimensions rank="1">
                </dimensions>
            </attribute>
            <attribute name="interpretation" type="NX_CHAR">
                <enumeration>
                    <item value="spectrum"></item>
                </enumeration>
            </attribute>
            <attribute name="signal" type="NX_CHAR">
                <enumeration>
                    <item value="I"></item>
                </enumeration>
            </attribute>

            <field name="I" type="NX_NUMBER">
                <dimensions rank="2">
                    <dim index="1" value="nImg" />
                    <dim index="2" value="nRad" />
                </dimensions>
                <attribute name="long_name" type="NX_CHAR">
                    <enumeration>
                        <item value="intensity"></item>
                    </enumeration>
                </attribute>
                <attribute name="units" type="NX_CHAR">
                    <enumeration>
                        <item value="arbitrary units"></item>
                    </enumeration>
                </attribute>
            </field>

            <field name="I_error" type="NX_NUMBER">
                <dimensions rank="2">
                    <dim index="1" value="nImg" />
                    <dim index="2" value="nRad" />
                </dimensions>
                <attribute name="long_name" type="NX_CHAR">
                    <enumeration>
                        <item value="estimated errors on intensity"></item>
                    </enumeration>
                </attribute>
                <attribute name="units" type="NX_CHAR">
                    <enumeration>
                        <item value="arbitrary units"></item>
                    </enumeration>
                </attribute>
            </field>

            <field name="x" type="NX_NUMBER">
                <dimensions rank="1">
                    <dim index="1" value="nRad" />
                </dimensions>
                <attribute name="long_name" type="NX_CHAR">
                    <enumeration>
                        <item value="q"></item>
                        <item value="2theta"></item>
                    </enumeration>
                </attribute>
                <attribute name="units" type="NX_CHAR">
                    <enumeration>
                        <item value="1/angstrom"></item>
                        <item value="degrees"></item>
                    </enumeration>
                </attribute>
            </field>

            <field name="x_edges" type="NX_NUMBER" optional="true">
                <dimensions rank="1">
                    <dim index="1" value="nRadEdge" />
                </dimensions>
                <attribute name="long_name" type="NX_CHAR">
                    <enumeration>
                        <item value="edges of q bins"></item>
                        <item value="edges of tth bins"></item>
                    </enumeration>
                </attribute>
                <attribute name="units" type="NX_CHAR">
                    <enumeration>
                        <item value="1/angstrom"></item>
                        <item value="degrees"></item>
                    </enumeration>
                </attribute>
            </field>

            <field name="q" type="NX_NUMBER" units="NX_PER_LENGTH" optional="true">
                <dimensions rank="1">
                    <dim index="1" value="nRad" />
                </dimensions>
                <attribute name="long_name" type="NX_CHAR">
                    <enumeration>
                        <item value="momentum transfer magnitude"></item>
                    </enumeration>
                </attribute>
                <attribute name="units" type="NX_CHAR">
                    <enumeration>
                        <item value="1/angstrom"></item>
                    </enumeration>
                </attribute>
            </field>

            <field name="tth" type="NX_NUMBER" units="NX_ANGLE" optional="true">
                <dimensions rank="1">
                    <dim index="1" value="nRad" />
                </dimensions>
                <attribute name="long_name" type="NX_CHAR">
                    <enumeration>
                        <item value="scattering angle, 2theta"></item>
                    </enumeration>
                </attribute>
                <attribute name="units" type="NX_CHAR">
                    <enumeration>
                        <item value="degrees"></item>
                    </enumeration>
                </attribute>
            </field>
         </group>

        <group name="data2d" type="NXdata" optional="true">
            <doc> Azimuthally integrated data with radial binning in q or 2theta and azimuthal binning in eta. </doc>
            <attribute name="axes" type="NX_CHAR">
                <enumeration>
                    <item value="['.', 'eta', 'x']"></item>
                </enumeration>
                <dimensions rank="1">
                </dimensions>
            </attribute>
            <attribute name="interpretation" type="NX_CHAR">
                <enumeration>
                    <item value="image"></item>
                </enumeration>
            </attribute>
            <attribute name="signal" type="NX_CHAR">
                <enumeration>
                    <item value="I"></item>
                </enumeration>
            </attribute>

            <field name="I" type="NX_NUMBER">
                <dimensions rank="3">
                    <dim index="1" value="nImg" />
                    <dim index="2" value="nAzi" />
                    <dim index="3" value="nRad" />
                </dimensions>
                <attribute name="long_name" type="NX_CHAR">
                    <enumeration>
                        <item value="intensity"></item>
                    </enumeration>
                </attribute>
                <attribute name="units" type="NX_CHAR">
                    <enumeration>
                        <item value="arbitrary units"></item>
                    </enumeration>
                </attribute>
            </field>

            <field name="I_error" type="NX_NUMBER">
                <dimensions rank="3">
                    <dim index="1" value="nImg" />
                    <dim index="2" value="nAzi" />
                    <dim index="3" value="nRad" />
                </dimensions>
                <attribute name="long_name" type="NX_CHAR">
                    <enumeration>
                        <item value="estimated errors on intensity"></item>
                    </enumeration>
                </attribute>
                <attribute name="units" type="NX_CHAR">
                    <enumeration>
                        <item value="arbitrary units"></item>
                    </enumeration>
                </attribute>
            </field>

            <field name="norm" type="NX_NUMBER">
                <dimensions rank="3">
                    <dim index="1" value="nImg" />
                    <dim index="2" value="nAzi" />
                    <dim index="3" value="nRad" />
                </dimensions>
                <attribute name="long_name" type="NX_CHAR">
                    <enumeration>
                        <item value="normalised intensity"></item>
                    </enumeration>
                </attribute>
                <attribute name="units" type="NX_CHAR">
                    <enumeration>
                        <item value="arbitrary units"></item>
                    </enumeration>
                </attribute>
            </field>

            <field name="x" type="NX_NUMBER">
                <dimensions rank="1">
                    <dim index="1" value="nRad" />
                </dimensions>
                <attribute name="long_name" type="NX_CHAR">
                    <enumeration>
                        <item value="q"></item>
                        <item value="2theta"></item>
                    </enumeration>
                </attribute>
                <attribute name="units" type="NX_CHAR">
                    <enumeration>
                        <item value="1/angstrom"></item>
                        <item value="degrees"></item>
                    </enumeration>
                </attribute>
            </field>

            <field name="x_edges" type="NX_NUMBER" optional="true">
                <dimensions rank="1">
                    <dim index="1" value="nRadEdge" />
                </dimensions>
                <attribute name="long_name" type="NX_CHAR">
                    <enumeration>
                        <item value="edges of q bins"></item>
                        <item value="edges of tth bins"></item>
                    </enumeration>
                </attribute>
                <attribute name="units" type="NX_CHAR">
                    <enumeration>
                        <item value="1/angstrom"></item>
                        <item value="degrees"></item>
                    </enumeration>
                </attribute>
            </field>

            <field name="eta" type="NX_NUMBER" units="NX_ANGLE">
                <dimensions rank="1">
                    <dim index="1" value="nAzi" />
                </dimensions>
                <attribute name="long_name" type="NX_CHAR">
                    <enumeration>
                        <item value="Azimuthal bin centre"></item>
                    </enumeration>
                </attribute>
                <attribute name="units" type="NX_CHAR">
                    <enumeration>
                        <item value="degrees"></item>
                    </enumeration>
                </attribute>
            </field>

            <field name="eta_edges" type="NX_NUMBER" optional="true">
                <dimensions rank="1">
                    <dim index="1" value="nAziEdge" />
                </dimensions>
                <attribute name="long_name" type="NX_CHAR">
                    <enumeration>
                        <item value="edges of azimuthal bins"></item>
                    </enumeration>
                </attribute>
                <attribute name="units" type="NX_CHAR">
                    <enumeration>
                        <item value="degrees"></item>
                    </enumeration>
                </attribute>
            </field>

            <field name="q" type="NX_NUMBER" units="NX_PER_LENGTH" optional="true">
                <dimensions rank="1">
                    <dim index="1" value="nRad" />
                </dimensions>
                <attribute name="long_name" type="NX_CHAR">
                    <enumeration>
                        <item value="momentum transfer magnitude"></item>
                    </enumeration>
                </attribute>
                <attribute name="units" type="NX_CHAR">
                    <enumeration>
                        <item value="1/angstrom"></item>
                    </enumeration>
                </attribute>
            </field>

            <field name="tth" type="NX_NUMBER" units="NX_ANGLE" optional="true">
                <dimensions rank="1">
                    <dim index="1" value="nRad" />
                </dimensions>
                <attribute name="long_name" type="NX_CHAR">
                    <enumeration>
                        <item value="scattering angle, 2theta"></item>
                    </enumeration>
                </attribute>
                <attribute name="units" type="NX_CHAR">
                    <enumeration>
                        <item value="degrees"></item>
                    </enumeration>
                </attribute>
            </field>
         </group>

        <group type="NXparameters" name="parameters" recommended="true">
            <doc>
                Parameters should exactly match those required by the algorithm used in the processing.
                For example, `azint` requires `error_model`, `mask`, `n_splitting`, `poni`, etc.
            </doc>
        </group>

        <group type="NXprocess" name="process">
            <field name="program" type="NX_CHAR">
                <doc> Name of algorithm used in the processing.</doc>
            </field>
            <field name="version" type="NX_CHAR">
                <doc> Version of the algorithm used in the processing. </doc>
            </field>
            <field name="date" type="NX_DATE_TIME">
                <doc> Date the file was created. </doc>
            </field>
            <field name="reference" type="NX_CHAR">
                <doc> Citation or other references for the algorithm used in the processing. </doc>
            </field>
            <field name="note" type="NX_CHAR" optional="true">
                <doc> Notes required to help interpret the data, e.g. on coordinate systems. </doc>
            </field>

        </group>

        <field name="program_name" type="NX_CHAR">
            <doc> Name of the program that made this file. </doc>
            <attribute name="version" type="NX_CHAR">
                <doc> Version of the program that made this file. </doc>
            </attribute>
        </field>

    </group>
</definition>
